### 클린코드

- 클린코드는 포매팅 이상의 중요한 의미를 갖는다.
- 표준 포매팅을 유지하는 것이 유지보수성의 핵심 유의사항이다.
- 코드 레아아웃을 일정하게 유지하면 팀 멤버들이 문제의 본질에 초점을 맞출 수 있다.

##### 클린코드란 ?

- 클린코드는 다른 엔지니어가 코드를 읽고 유지 관리하기 편한 코드를 말한다.
- 클린코드의 판단은 코드를 유지관리하는 전문가에 달려있다.

> 프로그래밍 언어는 개발자간 아이디어의 의사소통을 위한 도구이다.

##### 클린코드의 중요성

- 클린코드는 `유지보수성 향상, 기술 부채 감소, 애자일 개발을 통한 효과적인 작업 진행, 성공적인 프로젝트 관리`로 이어진다는 장점들이 있다.
- 일정한 예측 가능한 속도로 기능을 개발하고 배포하기 위해서는 유지보수에 좋은 코드는 필수적이다.
- 기술부채는 두가지로 설명 할 수 있다. 현재의 문제가 과거의 코드로 인한 것인가 ? 현재의 코드가 미래에 문제를 유발할 것인가 ?
- 내일을 위해 좋은 코드를 작성하는 것은 시간이 조금 더 걸릴 수 있어도 내일 좀더 편한 개발을 위한 기술 부채에 대한 비용을 지불 하는 것이다.
- 기술부채는 당장의 경고음을 내지는 않지만, 장기적으로 잠재적인 문제를 만들어 낼 수 있는 요소이다.

##### 코드 포맷팅

- 코드 포맷팅을 지키는 것이 클린코드를 따른다고 말하기는 어렵다. 포맷팅은 클린코드를 위한 방법이다.
- 코드 포맷팅이 클린코드를 말하지 않을 수 있으나, 포맷팅을 작업의 효율화를 위해서 중요한 요소이다.

##### 코딩 스타일 가이드 준수

- 코딩 스타일 가이드란 프로젝트에서 따라야하는 최소한의 요구사항이다.
- 좋은 코드의 레이아웃에서 가장 필요한 특성은 일관성이다. 일관성이 유지되면, 가독성이 좋아진다. (팀원간의 작업시 이해하기가 쉬워짐)
- 또한, 신속하게 패턴을 파악하기 쉬워지며, 팀원 코드에 대한 디버깅이 익숙해지게된다.
- 일반적으로 파이썬 코딩 스타일은 PEP8-8을 확장하게 구성한다.
- EX : 변수 함수 네이밍, 공백개수등

##### 문서화, 어노테이션(인자, 반환값에 대한 타입힌트)

- 주석과 문서화는 다르다.
- 문서화는 데이터타입이 무엇인지 설명하고 예제를 제공한다.
- 파이썬은 어노테이션을 통해 함수 인자 리턴값을 타입힌트 등의 자동화된 검증이 가능하다.

###### Docstring

- docstring은 리터럴 문자열이며, 문서화를 위해 코드 어딘가에 위치한다.
- 주석이 아니라, 모듈, 클래스, 메서드, 함수에 대한 문서화이다.
- 파이썬은 동적타이핑 언어이기때문에 docstring을 통해 입력과 반환값이 어떠한 타입이 사용되는지 알 수 있다.
- 객체에 docstring이 정의되어 있으면 __doc__속성을 통해 접근가능하다.
- docstring은 수잡업을 해야한다는 단점이 있으나, 모든 팀원이 참여한다면 각각이 작성한 코드를 이해하는 데 큰 도움이 된다.

###### 어노테이션(인자, 반환값에 대한 타입힌트)

- 어노테이션이란 함수 인자, 리턴값으 로 어떤 타입이 와야하는지 힌트를 주는 것이다.
- 어노테이션사용시 함수에  __anotations__라는 특수한 속성이 생긴다.

```python
def locate(lat: float, lng: float) -> Point:
    "..."

>>> locate.__anotations__
{'lat': float, 'lng': float, 'return': __main__.Point }
```

- 타입 검사를 도와주는 Mypy(타입힌팅도구)라는 도구가 있다. 이는 테스트나 검사시 버그를 찾는 데 도움이 된다.

> 어노테이션과 docstring은 상호 보완적인 개념이다. 어노테이션만 쓰는 것보다는 docstring을 통해 더 나은 문서화의 여지를 주는 것이 좋다.

###### 기본 품질향상

- 좋은 코드인지 판단하기 위해서는 포맷팅, 일관된 레이아웃, 적절한 들여쓰기만 검사하는 것을 넘어서 코드의 실제 의미와 가치를 이해하는 데에 시간 투자를 하는 것이 효과적이다.
- 위에서 말한 기본적인검사는 자동화하여, 개발자들이 검사에 시간을 낭비하지 않도록해야한다.

###### 자동 검사 설정
- 리눅스 개발환경에서 빌드를 자동화하는 가장 일반적인 방법은 makefile사용이다.

- Makefile
```
typehint:
mypy src/ tests/

test:
pytest tests/

lint:
pylint src/ tests/

checklist: lint typehint test

.PHONY: typehint test lint checklist
```
```bash
make checklist
```
> 참고 : 자동으로 코드를 수정해 주는 도구로 Black이라는 도구가 있다.

#### 결론

- 클린 코드란 코드 구조나 레이아웃을 의미하는 것을 넘어, 개발자간 아이디어를 효과적으로 주고 받고, 기술부채 해결 및 유지보수를 좋게하는 모든 것을 의미한다.
- 코딩스타일이나 가이드라인은 클린코드를 위한 충분조건이 되지 않는다.
- 검사를 자동화하면 실제 문제에 초점을 맞출 수 있으므로, 자동화를 위한 여러 도구와 방법을 고민해보면 좋다.
