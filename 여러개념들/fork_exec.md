# fork 및 exec

- fork()를 호출하면 새로운 프로세스는 모든 스레드를 복제해야 하는가? exec()호출은 매개변수로 지정된 프로그램이 모든 스레드를 포함한 전체 프로세스를 교체한다. 
- 이 경우에는 이전의 모든 스레드를 복제 할 필요가 없다. 그러나 새 프로세스가 fork() 후 exec를 하지 않는다면 모든 스레드를 복제해야한다.
- 멀티스레드 환경에서 fork를 사용할 경우 부모프로세스의 메모리를 전부 복사하고, fork를 호출한 스레드를 제외한 나머지 스레드들을 모두 죽여버린다. 
- 때문에 fork를 호출한 스레드 이외의 스레드는 점유하고 있던 자원을 해제하지 못해 메모리릭이 발생하고, 해당 스레드가 mutex나 조건변수들을 가지고 있는 상태에서 죽어버린다면 criticalsection에는 다시 진입할 수 없게되어 주의해야한다.
